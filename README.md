# A股数据获取工具

使用baostock库获取A股股票、指数、ETF的历史数据。

## 功能特点

- 获取2020年至今的日K线数据
- 包含股票、指数、ETF三大类资产
- 每个证券保存为独立的CSV文件
- 包含开高低收、成交量、成交金额、涨跌幅等核心字段
- 支持后复权数据

## 安装依赖

```bash
# 使用uv安装依赖
uv add baostock pandas numpy tqdm

# 或者直接使用pip
pip install baostock pandas numpy tqdm
```

## 使用方法

### 快速开始

```bash
# 使用uv运行脚本
uv run fetch_data.py

# 或者直接运行
python fetch_data.py
```

### 完整功能版本

```bash
# 运行完整版本（包含财务数据和行业分类）
uv run main.py

# 或者直接运行
python main.py
```

## 数据说明

### 文件命名规则

- 股票数据：`stock_{交易所代码}_{股票名称}.csv`
- 指数数据：`index_{交易所代码}_{指数名称}.csv`
- ETF数据：`etf_{交易所代码}_{ETF名称}.csv`

### 数据字段

- `date`: 交易日期
- `open`: 开盘价
- `high`: 最高价
- `low`: 最低价  
- `close`: 收盘价
- `volume`: 成交量
- `amount`: 成交金额
- `pctChg`: 涨跌幅

### 示例数据

```csv
date,open,high,low,close,volume,amount,pctChg
2020-01-02,15.08,15.34,15.02,15.17,12345678,187654321.0,0.89
2020-01-03,15.20,15.45,15.10,15.32,23456789,345678901.0,0.99
...
```

## 注意事项

1. **网络要求**：需要稳定的网络连接访问baostock服务器
2. **请求频率**：脚本内置了请求间隔，避免过于频繁的请求
3. **数据量**：全市场数据量较大，首次运行需要较长时间
4. **免费额度**：baostock提供免费数据服务，但可能有调用限制

## 项目结构

```
.
├── data/                    # 数据保存目录
├── main.py                  # 完整功能版本
├── fetch_data.py           # 简化版本（推荐）
├── pyproject.toml          # 项目配置
└── README.md              # 项目说明
```

## 故障排除

### 常见问题

1. **登录失败**：检查网络连接，确认baostock服务正常
2. **数据获取为空**：可能是该证券在指定时间段内无交易数据
3. **文件保存失败**：检查data目录权限和磁盘空间

### 性能优化

- 使用`fetch_data.py`获取核心数据，运行更快
- 可根据需要修改`START_DATE`调整数据时间范围
- 可添加特定股票代码过滤，只获取关注标的

## 更新日志

- 2024-11-27: 初始版本，支持基本数据获取功能